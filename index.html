<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Interactive maps</title>
        <link
            rel="icon"
            type="image/x-icon"
            href="scomodissima_icona.ico"
        />
        <link rel="stylesheet" href="landing-style.css" />
    </head>
    <body>
        <div class="landing-container">
            <!-- Section 1: Notebooks -->
            <div class="section" data-section="notebooks">
                <div class="section-content">
                    <h2 class="section-title">Data Analysis Notebooks</h2>
                    <div class="hover-overlay">
                        <div class="image-container">
                            <img
                                src="previews/notebooks.jpg"
                                alt="Notebooks Preview"
                                class="preview-image"
                            />
                        </div>
                        <div class="content-wrapper">
                            <div class="description">
                                <p class="description-text">
                                    Comprehensive data processing pipeline for
                                    urban space mapping in Bari. The first
                                    notebook automates the transformation of
                                    geographic and institutional data from Excel
                                    spreadsheets into structured JSON datasets,
                                    extracting hyperlinks, parsing opening
                                    hours, and organizing spaces by category
                                    (aggregation, social struggle, and study
                                    spaces). The second notebook queries
                                    OpenStreetMap's Overpass API to collect
                                    Points of Interest (POIs) and amenities
                                    across Bari, using geometric operations to
                                    validate coordinates and enrich the spatial
                                    database. Together, these notebooks enable
                                    efficient data preparation and geographic
                                    enrichment for the interactive mapping
                                    visualizations, converting raw data and
                                    open-source geographic information into
                                    ready-to-use JSON files.
                                </p>
                            </div>
                            <div class="buttons-container">
                                <a
                                    href="notebooks/mappaturaExcelToJson.html"
                                    class="btn btn-primary"
                                    onclick="event.stopPropagation()"
                                >
                                    <svg
                                        width="20"
                                        height="20"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                    >
                                        <path
                                            d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                                        ></path>
                                        <polyline
                                            points="14 2 14 8 20 8"
                                        ></polyline>
                                    </svg>
                                    Maps data analysis Notebook
                                </a>
                                <a
                                    href="notebooks/query.html"
                                    class="btn btn-primary"
                                    onclick="event.stopPropagation()"
                                >
                                    <svg
                                        width="20"
                                        height="20"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                    >
                                        <path
                                            d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                                        ></path>
                                        <polyline
                                            points="14 2 14 8 20 8"
                                        ></polyline>
                                    </svg>
                                    Query Notebook
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: Spazi di Aggregazione -->
            <div class="section" data-section="aggregazione">
                <div class="section-content">
                    <h2 class="section-title">Aggregation Spaces</h2>
                    <div class="hover-overlay">
                        <div class="image-container">
                            <img
                                src="previews/spaziDiAggregazione.png"
                                alt="Aggregation Spaces Preview"
                                class="preview-image"
                            />
                        </div>
                        <div class="content-wrapper">
                            <div class="description">
                                <p class="description-text">
                                    Interactive multi-layer mapping platform for
                                    visualizing aggregation spaces,
                                    citizen-reported locations from
                                    questionnaires, and OpenStreetMap amenities
                                    across Bari. Features a modular architecture
                                    with three independently controllable data
                                    layers, each toggleable between pin markers
                                    and heat density visualization. Users can
                                    dynamically switch visualization modes
                                    through radio controls, explore individual
                                    locations with detailed tooltips, and view
                                    comprehensive information (including
                                    structured opening hours, categories, and
                                    coordinates) in a slide-out panel. Built
                                    with Leaflet.js and organized with ES6
                                    modules, the platform includes UI hiding
                                    functionality, custom color-coded markers,
                                    polygon boundary overlays, and responsive
                                    design for analyzing spatial distribution
                                    patterns of social spaces throughout the
                                    city.
                                </p>
                            </div>
                            <div class="buttons-container">
                                <a
                                    href="SpaziAggregazioneMap/index.html"
                                    class="btn btn-primary btn-single"
                                    onclick="event.stopPropagation()"
                                >
                                    <svg
                                        width="20"
                                        height="20"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                    >
                                        <polyline
                                            points="22 12 18 12 15 21 9 3 6 12 2 12"
                                        ></polyline>
                                    </svg>
                                    Visualization
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: Spazi di Lotta -->
            <div class="section" data-section="lotta">
                <div class="section-content">
                    <h2 class="section-title">Social Struggle Spaces</h2>
                    <div class="hover-overlay">
                        <div class="image-container">
                            <img
                                src="previews/spaziDiLotta.png"
                                alt="Struggle Spaces Preview"
                                class="preview-image"
                            />
                        </div>
                        <div class="content-wrapper">
                            <div class="description">
                                <p class="description-text">
                                    Minimalist interactive mapping application
                                    focused on visualizing social struggle
                                    spaces in Bari through a spotlight
                                    interaction pattern. When clicking any
                                    location pin, the system generates a dynamic
                                    SVG overlay that darkens the entire map
                                    while creating a 150-meter radius circular
                                    cutout around the selected point, visually
                                    "spotlighting" that area and filtering
                                    nearby amenities. Features dual-layer
                                    architecture displaying social struggle
                                    spaces and OpenStreetMap amenities with
                                    distance-based visibility filtering, a
                                    multi-spotlight mode ("Tutti gli Spazi" /
                                    "All places") that simultaneously highlights
                                    all locations with multiple circular
                                    cutouts, real-time overlay updates during
                                    map zoom and pan. Built with Leaflet.js and
                                    modular ES6 architecture, emphasizing
                                    focused exploration over complex controls
                                    with a single-button interface for clean,
                                    distraction-free spatial analysis.
                                </p>
                            </div>
                            <div class="buttons-container">
                                <a
                                    href="SpaziDiLottaInteractive/index.html"
                                    class="btn btn-primary btn-single"
                                    onclick="event.stopPropagation()"
                                >
                                    <svg
                                        width="20"
                                        height="20"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                    >
                                        <polyline
                                            points="22 12 18 12 15 21 9 3 6 12 2 12"
                                        ></polyline>
                                    </svg>
                                    Visualization
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: Spazi di Studio -->
            <div class="section" data-section="studio">
                <div class="section-content">
                    <h2 class="section-title">Study Spaces</h2>
                    <div class="hover-overlay">
                        <div class="image-container">
                            <img
                                src="previews/spaziDiStudio.png"
                                alt="Study Spaces Preview"
                                class="preview-image"
                            />
                        </div>
                        <div class="content-wrapper">
                            <div class="description">
                                <p class="description-text">
                                    Time-interactive mapping platform for
                                    discovering study spaces across Bari with
                                    intelligent availability filtering. Features
                                    a horizontal time control interface allowing
                                    users to select any day and hour to
                                    automatically filter locations by opening
                                    hours, with the system defaulting to current
                                    time and "show only open" mode on page load.
                                    Includes comprehensive opening hours parsing
                                    and display system showing structured weekly
                                    schedules with multiple time slots per day.
                                    Users can contribute new locations through a
                                    validated web form (name, email,
                                    description, address, functionality,
                                    capacity, links) that submits directly via
                                    Web3Forms API with real-time field
                                    validation and error handling. Built for
                                    students seeking available study locations,
                                    combining Leaflet.js mapping with practical
                                    scheduling utilities and community-driven
                                    content expansion through an accessible
                                    submission workflow.
                                </p>
                            </div>
                            <div class="buttons-container">
                                <a
                                    href="SpaziStudioMap/index.html"
                                    class="btn btn-primary btn-single"
                                    onclick="event.stopPropagation()"
                                >
                                    <svg
                                        width="20"
                                        height="20"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                    >
                                        <polyline
                                            points="22 12 18 12 15 21 9 3 6 12 2 12"
                                        ></polyline>
                                    </svg>
                                    Visualization
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        function initMobileInteraction() {
            if (window.innerWidth <= 768) {
                const sections = document.querySelectorAll(".section");

                // Remove any existing listeners by cloning and replacing nodes
                sections.forEach((section) => {
                    const newSection = section.cloneNode(true);
                    section.parentNode.replaceChild(newSection, section);
                });

                // Add new listeners to the fresh nodes
                document.querySelectorAll(".section").forEach((section) => {
                    section.addEventListener("click", function (e) {
                        // Don't trigger if clicking on a button/link
                        if (e.target.closest(".btn")) {
                            return;
                        }

                        // Toggle active class
                        const isActive = this.classList.contains("active");
                        document
                            .querySelectorAll(".section")
                            .forEach((s) => s.classList.remove("active"));

                        if (!isActive) {
                            this.classList.add("active");
                        }
                    });
                });
            }
        }

        // Initialize on load
        initMobileInteraction();

        // Re-initialize on resize (if switching between mobile/desktop)
        let resizeTimer;
        window.addEventListener("resize", function () {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function () {
                initMobileInteraction();
            }, 250);
        });
    });
</script>
